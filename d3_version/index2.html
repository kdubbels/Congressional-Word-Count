<!doctype html>
<!-- timestamp: 2013-11-01 10:29 -->
<html>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
<script>
function showResponse (response) {
            RESPONSE = response;
            if (this && this.url && (typeof(this.url) == "string")) {
                var anchor = jQuery("#url");
                anchor.text(this.url.toString());
                anchor.attr('href', this.url.toString());
            }
            jQuery("#output").text(JSON.stringify(response, null, '  '));
        }

</script>


        <script src="revised.js" type="text/javascript"></script>
<!-- 
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"> -->

<style>

  th {
    font-size: 18px;
  }
  td {
    font-size: 18px;

  }
  td.data {
    font-weight: 600;
    padding-left:20px;
  }
  #modal {
    margin-left:20px;
    z-index:1;
    background: white;
  }
</style>


    </head>
    <body>

<form  class="form-horizontal" action="" id="phrase-lookup">
                <div class="form-group">
                <label for="txt-phrase" class="col-sm-2 control-label">Your phrase:</label>
                <div class="col-sm-10">
                <input type="text" id="txt-phrase" name="phrase" required />
                </div>
            </div>
            <div class="form-group">
                <label for="txt-startdate" class="col-sm-2 control-label">Start date:</label>
                <div class="col-sm-10">
                <input type="text" id="txt-startdate" name="start date" required />
                </div>
            </div>
            <div class="form-group">
                <label for="txt-enddate" class="col-sm-2 control-label">End date:</label>
                <div class="col-sm-10">
                <input type="text" id="txt-enddate" name="end date" required />
                </div>
            </div>



            <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" id="btn-lookup">Look up a phrase</button>
            </div>
            </div>
        </form>

<div id="modal">
        <table>
    <tr>
        <th>Totals</th>
    </tr>
    <tr><td>Democrats</td><td class="data"></td></tr>
    <tr><td>Republicans</td><td class="data"></td></tr>
    <tr><td>Independents</td><td class="data"></td></tr>

</table>
</div>

<div id="chart"></div>


    <!-- Include all compiled plugins (below), or include individual files as needed -->

    </body>


    <script>

(function() {



      var data = [{count: 485, party: "Democrats"}, {count: 440, party: "Republicans"}];
     console.log(data);
     var width = 960,
          height = 500,
          radius = Math.min(width, height) / 2;

      var color = d3.scale.category10()
           .range(["steelblue", "orange", "white"]);

      var arc = d3.svg.arc()
          .outerRadius(radius - 10)
          .innerRadius(radius - 70);

      var pie = d3.layout.pie()
          .sort(null)
          .value(function(d) { return d.count; });

      var svg = d3.select("#chart").append("svg")
          .attr("id", "drawnChart")
          .attr("width", width)
          .attr("height", height)
        .append("g")
          .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

      var g = svg.selectAll(".arc")
          .data(pie(data))
        .enter().append("g")
          .attr("class", "arc");
      
      g.append("path")
          .attr("d", arc)
          .style("fill", function(d) {console.log(d); return color(d.data.party); });

      g.append("text")
        .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .append("tspan")
        .text(function(d) { return d.data.party;})
        .append("tspan")
        // .attr("dy", "10px")
        .text(function(d) { return " " + d.data.count; });


      d3.selectAll("td.data").data(data).text(function(d) {return d.count; });


})();


    </script>
</html>